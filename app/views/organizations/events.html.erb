<div class="w-full h-full m-auto flex">
  <div class="bg-gray-700"><%= render 'sidebar' %></div>
  <div class="w-full p-5">
    <h3 class="w-full text-4xl text-center mt-5 text-gray-500 border-b border-gray-400 px-4 font-bold">
      <span class="text-4xl text-red-600"><%= @organization.title %></span> 的活動舉辦列表</h3>

    <div class="my-8 mr-3 text-right">
        <%= link_to '建立活動', new_event_path(:organization_id => @organization.id), class: "p-3 border border-gray-400 rounded-lg bg-white hover:bg-red-700 hover:text-white cursor-pointer font-bold shadow-2xl" %>
    </div>

    <div class="overflow-y-scroll h-96">
      <% @events.each do |event| %>
        <div class="card flex justify-around my-10 rounded-lg shadow-2xl" id="event<%=event.id%>">
          <div class="my-3 w-1/3 text-center">
            <h5 class="text-2xl italic mt-5 font-bold text-center"><%= event.title %></h5> <span class="text-base">(<%= event.status %>)</span>
            <div class="w-full m-auto flex justify-center mt-3">
              <div class="mr-3">
                <%= link_to "活動頁面", event_path(event.id), class: "event-page shadow-2xl rounded-lg hover:bg-red-700 hover:text-white cursor-pointer font-bold" %>
                <%= link_to '編輯活動', edit_event_path(event.id), class: "event-page shadow-2xl rounded-lg hover:bg-red-700 hover:text-white cursor-pointer font-bold"%>
                <%= link_to "新增票卷", new_event_ticket_path(event.id), class: "event-page shadow-2xl rounded-lg hover:bg-red-700 hover:text-white cursor-pointer font-bold" %>
              </div>
              <div>
                <%= link_to "發布活動", publish_organization_path(event.id, :organization_id => @organization.id), class: "event-page shadow-2xl rounded-lg hover:bg-red-700 hover:text-white cursor-pointer font-bold" %>
                <%= link_to "暫緩活動", pending_organization_path(event.id, :organization_id => @organization.id), class: "event-page shadow-2xl rounded-lg hover:bg-red-700 hover:text-white cursor-pointer font-bold" %>
                <%= button_to '刪除活動', event_path(event.id, :organization_id => @organization.id ), method: :delete, data: { confirm: '確定要刪除活動嗎？'}, class: "event-page shadow-2xl rounded-lg hover:bg-red-700 hover:text-white cursor-pointer font-bold" %>
              </div>
            </div>
          </div>
          <div class="my-3 overflow-y-auto h-64 w-1/3 p-8 mr-5">
            <table class="org-event-list shadow-2xl rounded-3xl">
              <tr class="bg-red-500 text-white">
                <th class="text-sm font-bold border-r border-red-300">票種名稱</td>
                <th class="text-sm font-bold border-r border-red-300">售價</td>
                <th class="text-sm font-bold border-r border-red-300">數量</td>
                <th class="text-sm font-bold">修改</td>
              </tr>
              <% event.tickets.sort.each do |t| %>
              <tr class="border-t">
                <td class="text-sm font-bold border-r"><%= t.name %></td>
                <td class="text-sm font-mono border-r"><%= t.price %></td>
                <td class="text-sm font-mono border-r"><%= t.amount %></td>
                <td class="text-sm text-red-600 font-bold"><%= link_to '編輯', edit_event_ticket_path(t.event.id, t.id) %> </td>
              </tr>
              <% end%>
            </table>
          </div>

          <div class="my-3 mr-3 w-1/3 p-8 rounded-lg shadow-lg">
            <h5 class="font-bold m-auto mb-3 text-lg bg-red-500 text-center rounded-lg text-white">活動描述</h5>
            <p class="overflow-y-auto h-32"><%= event.description %></p>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>